<h1 id="Contributing-to-Medium-Zoom"><a href="#Contributing-to-Medium-Zoom" class="headerlink" title="Contributing to Medium Zoom"></a>Contributing to Medium Zoom</h1><p>Thank you for getting involved in Medium Zoom!</p>
<h2 id="Concept"><a href="#Concept" class="headerlink" title="Concept"></a>Concept</h2><p>This module is meant to reproduce the zoom from <a href="http://medium.com/">Medium</a>. We want to provide a great UX (User Experience) with a lightweight vanilla JavaScript solution. Thus, this package must remain focused on this core principle, yet be extended with a composable API.</p>
<h2 id="Folder-structure"><a href="#Folder-structure" class="headerlink" title="Folder structure"></a>Folder structure</h2><pre><code>▸ cypress           The end-to-end tests written for Cypress
▸ examples          The Medium Zoom featured examples available on CodeSandbox
▸ src               The source code of the module
  ▸ __tests__       The tests for the module API
▸ stories           The stories for the Medium Zoom Storybook
▸ website           The Medium Zoom website source code</code></pre>
<h2 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h2><ul>
<li><a href="https://nodejs.org/">Node</a></li>
<li><a href="https://yarnpkg.com/">Yarn</a></li>
</ul>
<h2 id="Conventions"><a href="#Conventions" class="headerlink" title="Conventions"></a>Conventions</h2><h3 id="Commits"><a href="#Commits" class="headerlink" title="Commits"></a>Commits</h3><p>This project follows the <a href="https://conventionalcommits.org/">conventional changelog</a> guidelines. All commit messages should be formatted using the following scheme:</p>
<pre><code>type(scope): description</code></pre>
<h2 id="Workflow"><a href="#Workflow" class="headerlink" title="Workflow"></a>Workflow</h2><h3 id="Filing-issues"><a href="#Filing-issues" class="headerlink" title="Filing issues"></a>Filing issues</h3><p>Reporting a bug or requesting a feature is always welcome. Feel free to <a href="https://github.com/francoischalifour/medium-zoom/issues/new/choose">open an issue</a> with the according template which helps you create an effective report.</p>
<h3 id="Submit-code"><a href="#Submit-code" class="headerlink" title="Submit code"></a>Submit code</h3><p>After discussing in an issue about the need to change the code, you will need to follow these steps:</p>
<ul>
<li><a href="https://help.github.com/articles/fork-a-repo/">Fork the repository</a></li>
<li>Clone your fork</li>
<li>Install the dependencies: <code>yarn</code></li>
<li>For a <strong>documentation</strong> change:<ul>
<li>Create a branch <code>docs/what-you-change</code></li>
<li>Make the changes</li>
<li>Run <code>yarn run format</code></li>
</ul>
</li>
<li>For a <strong>bug fix</strong>:<ul>
<li>Create a branch <code>fix/issue-number</code></li>
<li><a href="src/__tests__/medium-zoom.test.js">Write a test</a> to reproduce the bug (run <code>yarn run test</code>)</li>
<li>Fix the bug in the <a href="src/medium-zoom.js">source code</a></li>
<li>Make your test pass the previous bug</li>
<li>Run <code>yarn run format</code> and fix problems if any</li>
</ul>
</li>
<li>For a <strong>feature</strong>:<ul>
<li>Create a branch <code>feat/name-of-the-feature</code></li>
<li>Add the feature to the <a href="src/medium-zoom.js">source code</a></li>
<li>Create a story in the <a href="stories">storybook</a> showcasing the feature</li>
<li><a href="src/__tests__/medium-zoom.test.js">Write a test</a> to ensure it’s working as expected (run <code>yarn run test</code>)</li>
<li>Run <code>yarn run format</code> and fix problems if any</li>
</ul>
</li>
<li><a href="https://help.github.com/articles/creating-a-pull-request/">Create a pull request</a></li>
</ul>
<p>We will then review your pull request!</p>
<h3 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h3><h4 id="Unit-and-integration-tests"><a href="#Unit-and-integration-tests" class="headerlink" title="Unit and integration tests"></a>Unit and integration tests</h4><p><a href="src/__tests__">Unit and integration tests</a> with <a href="https://jestjs.io/">Jest</a> ensure that the API works as documented.</p>
<h6 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h6><ul>
<li>Run the tests: <code>yarn run test</code></li>
<li>Watch the tests: <code>yarn run test --watch</code></li>
<li>Run the tests with coverage: <code>yarn run test --coverage</code></li>
</ul>
<h4 id="End-to-end-tests"><a href="#End-to-end-tests" class="headerlink" title="End-to-end tests"></a>End-to-end tests</h4><p><a href="cypress/integration">End-to-end tests</a> with <a href="https://cypress.io/">Cypress</a> take screenshots of the stories to ensure that the zoom looks as expected.</p>
<h6 id="Commands-1"><a href="#Commands-1" class="headerlink" title="Commands"></a>Commands</h6><ul>
<li>Open the Cypress UI: <code>yarn run test:cypress:open</code></li>
<li>Run the Cypress tests: <code>yarn run test:cypress:run</code></li>
</ul>
<h3 id="Releasing"><a href="#Releasing" class="headerlink" title="Releasing"></a>Releasing</h3><p>We rely on <a href="https://github.com/webpro/release-it">release-it</a> to release new versions of this package.</p>
<h4 id="Release-flow"><a href="#Release-flow" class="headerlink" title="Release flow"></a>Release flow</h4><p>The release flow goes through these steps:</p>
<ol>
<li>Run acceptance tests</li>
<li>Bump the project version in <a href="package.json"><code>package.json</code></a> based on <a href="#conventions">the commits</a></li>
<li>Commit the release version</li>
<li>Create the new Git tag for this release</li>
<li>Push to GitHub</li>
<li>Publish to npm</li>
</ol>
<h4 id="Release-steps"><a href="#Release-steps" class="headerlink" title="Release steps"></a>Release steps</h4><h5 id="Unstable-version"><a href="#Unstable-version" class="headerlink" title="Unstable version"></a>Unstable version</h5><ol>
<li>Make sure you’re on the <code>next</code> branch</li>
<li>Run <code>npm run release:next</code> (<em>do not</em> use <code>yarn</code> for releasing)</li>
<li>Follow the command-line instructions</li>
</ol>
<h5 id="Stable-version"><a href="#Stable-version" class="headerlink" title="Stable version"></a>Stable version</h5><ol>
<li>Make sure you’re on the <code>master</code> branch</li>
<li>Run <code>npm run release</code> (<em>do not</em> use <code>yarn</code> for releasing)</li>
<li>Follow the command-line instructions</li>
</ol>
<hr>
<p>Thank you for contributing!</p>
